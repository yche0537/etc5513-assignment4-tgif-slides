---
title: "Xaringan Template"
subtitle: "An example"
author: "Patricia Menéndez"
institute: "Department of Econometrics and Business Statistics"
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: ["xaringan-themer.css"]
    yolo: FALSE
---


```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

```{r , echo = FALSE, message = FALSE, warning = FALSE}
library(tidyverse)
library(palmerpenguins)
library(datasets)
library(readr)
library(kableExtra)
library(bookdown)
library(gridExtra)
library(plotly)
library(xaringanthemer)
style_mono_accent(base_color = "#43418A")
```

class: center, middle
![](https://media.giphy.com/media/OkJat1YNdoD3W/giphy.gif)


---
class: center, middle
# Hello!

Dr Patricia Menéndez
```{r out.width = '35%', echo = FALSE, fig.align="center"}
knitr::include_graphics("figs/patricia.jpeg")
```

Lecturer Department of Econometric and Business Statistics.





---
# Of course Yourselves too!

![](figs/baim-hanif-pYWuOMhtc6k-unsplash.jpg)

.tiny[<span>Photo by <a href="https://unsplash.com/@baim?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Baim Hanif</a> on <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></span>]



---
class: left, top
# This is an example of using boxes around txt
.content-box-soft[ 
- Understand the aims and structure of the unit
]

.content-box-duke-green[ 
* Explain the need for reproducible and collaborative practices
]
.content-box-soft[ 
* Introduce the main tools that we are going to use during the lectures/tutorials
]



---
class: left, top

# Adding color to the text

- .green[ This is an example in green]
- .red[ This is an example in green]

- .bold[This is an example in bold]

- you can also use markdown bold syntax **bold**



---
class: center, top

# Unit Structure



.pull-left[
* Start with individual projects 
.tiny[<span>Photo by <a href="https://unsplash.com/@firmbee?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">William Iven</a> on <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></span>]
]
.pull-left[
```{r out.width = '50%', echo = FALSE}
knitr::include_graphics("figs/william-iven-gcsNOsPEXfs-unsplash.jpg")
```

]

.pull-left[
 * Will continue with group projects
 
 .tiny[<span>Photo by <a href="https://unsplash.com/@homajob?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Scott Graham</a> on <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></span>]

]
.pull-left[
```{r out.width = '50%', echo = FALSE}
knitr::include_graphics("figs/helloquence-5fNmWej4tAA-unsplash.jpg")
```


]

.pull-left[
 * Finally, as a class, we will produce a join project
 
 .tiny[<span>Photo by <a href="https://unsplash.com/@baim?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Baim Hanif</a> on <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></span>]
]
.pull-left[
```{r out.width = '50%', echo = FALSE}
knitr::include_graphics("figs/baim-hanif-pYWuOMhtc6k-unsplash.jpg")
```

]







---
class: left, middle
# Different headings
.green[.bold[Example]] 
### Smaller heading
* My section

### Another samller heading
.content-box-duke-green[ 

  - You will get instructions with the tasks that need to be completed during the tutorial.
  - Fan and Naveen will be there to guide and help you through the activities.
  - Tutorials also provide a good opportunity for you to discuss and work with your peers.
]


---

class: left, middle
# Using also LaTex

.content-box-soft[ 
- .green[.bold[Patricia]] $\leftarrow$ hello hello ]

- $\sum_{i = 1}^{\infty} x_i$

**Bolding using markdown**

---
class: centre, middle
# Questions?



---
class:  center, top

# Let's get started with gifs


![](https://media.giphy.com/media/3ohc1fpw7snh6omAaQ/giphy.gif)





---
class: left, top

# Adding code

```{r }
c(1:10)

```


---
class: left, top
# Adding code

```{r }
penguins %>%
  dplyr::select(body_mass_g,
                ends_with("_mm")
                ) %>%
  glimpse()
```




---
class:  left, top
# Adding figure

.pull-left1[
```{r  penguins , eval = FALSE, warning = FALSE, message = FALSE}
ggplot(data = penguins, 
       aes(x = flipper_length_mm,
           y = body_mass_g)) +
  geom_point(aes(color = species,
                 shape = species),
             size = 2) +
  scale_color_manual(
    values = c("darkorange",
               "darkorchid",
               "cyan4"))

```
]


.pull-right1[
```{r  penguins2 , eval = TRUE, echo = FALSE, warning = FALSE, message = FALSE}
ggplot(data = penguins,
       aes(x = flipper_length_mm,
           y = body_mass_g)) +
  geom_point(aes(color = species,
                 shape = species),
             size = 2) +
  scale_color_manual(
    values = c("darkorange",
               "darkorchid",
               "cyan4"))

```
]



---
class:  left, top
# Adding figure --> another way

.right-column[
```{r  penguins3 , eval = FALSE, warning = FALSE, message = FALSE}
ggplot(data = penguins, 
       aes(x = flipper_length_mm,
           y = body_mass_g)) +
  geom_point(aes(color = species,
                 shape = species),
             size = 2) +
  scale_color_manual(
    values = c("darkorange",
               "darkorchid",
               "cyan4"))

```
]


.left-column[
```{r  penguins4 , eval = TRUE, echo = FALSE, warning = FALSE, message = FALSE}
ggplot(data = penguins,
       aes(x = flipper_length_mm,
           y = body_mass_g)) +
  geom_point(aes(color = species,
                 shape = species),
             size = 2) +
  scale_color_manual(
    values = c("darkorange",
               "darkorchid",
               "cyan4"))

```
]


---
# Tables


```{r}
iris2 <- head(iris)
knitr::kable(iris2,
             col.names = gsub("[.]", " ",
                              names(iris)))

```





---
class: left, top
# Per capita meat consumption -Yunzhi Chen
```{r read-data, echo = FALSE, message = FALSE}
# Read data
meat_consumption_total <- read.csv(here::here("Data/meat-supply-per-person.csv"))
meat_consumption_type <- read.csv(here::here("Data/per-capita-meat-consumption-by-type-kilograms-per-year.csv"))
meat_consumption <- meat_consumption_type %>% left_join(meat_consumption_total) %>%
  rename(Country = Entity,
         Mutton_Goat = Mutton...Goat.meat.food.supply.quantity..kg.capita.yr...FAO..2020.,
         Other_meats = Meat..Other..Food.supply.quantity..kg.capita.yr...FAO..2020.,
         Poultry = Poultry.meat.food.supply.quantity..kg.capita.yr...FAO..2020.,
         Pork = Pigmeat.food.supply.quantity..kg.capita.yr...FAO..2020.,
         Beef_Bufallo = Bovine.meat.food.supply.quantity..kg.capita.yr...FAO..2020.,
         Total_consumption_kg_capita_yr = Meat.food.supply.quantity..kg.capita.yr...FAO..2020.) %>%
  na_if("") %>%
  filter(complete.cases(Code)) %>%
  filter(Country != "Hong Kong" & Country != "Taiwan")

```
## Research questions

.content-box-duke-green[ 
* Q1: Which countries eat the most meat in the last 20 years?
]

.content-box-duke-green[ 
* Q2: What types of meat do people eat?
]

**Q1: Which countries eat the most meat in the last 20 years?**
**Q2: What types of meat do people eat?**

???
注释





---
class: left, top
## Which countries eat the most meat in the last 20 years?

```{r highest-meanconsumption, echo = FALSE}

highest_meanconsumption <- meat_consumption %>% 
                 filter(Year >= 1997) %>%
                 group_by(Country) %>%
                 summarise(Mean_consumption_kg_capita_yr = mean(Total_consumption_kg_capita_yr)) %>%
                 arrange(desc(Mean_consumption_kg_capita_yr)) %>%
                 select(Country, Mean_consumption_kg_capita_yr)

table_data2 <- head(highest_meanconsumption, 6)

knitr::kable(table_data2,
             caption = "Top 6 countries with the largest mean of meat consumption over years", digits = 2) 
```

- The top six countries are the United States, Australia, New Zealand, Spain, French Polynesia and Bahamas.

???
The top six countries with the highest average meat consumption mean in the world over the 20-year period from 1997 to 2017 are the United States, Australia, New Zealand, Spain, French Polynesia and Bahamas. The highest per capita meat consumption mean of the United States reached about 121.2 kg/capita/year. Countries with high income also consume more meat. Developed countries account for a large share of the six countries with the highest average meat consumption over years.

---
class: left, top
## Which countries eat the most meat in the last 20 years?


```{r highest-consumption-trend, echo = FALSE,  fig.height=5, fig.width=9, fig.cap = "Consumption trend of top 6 countries"}
highest_consumption_trend <- meat_consumption %>% 
             filter(Year >= 1997) %>%
             filter(Country %in% c("United States", 
                                   "Australia", 
                                   "New Zealand", 
                                   "Spain", 
                                   "French Polynesia", 
                                   "Bahamas",
                                   "World")) 

ggplot(highest_consumption_trend, 
      aes(x = Year, 
          y = Total_consumption_kg_capita_yr, 
          color = Country)) + 
 geom_line()  

```

- Considerable fluctuation trends except Australia and the United States.
- Total value is much higher than the world consumption.

???
The meat consumption per person in these countries over the last 20 years have fluctuated considerably, with the exception of Australia and the United States, where consumption has increased, while all other countries have shown a decreasing trend, but the total value is still much higher than the world per capita meat consumption.


---
class: left, top
## What types of meat do people eat?

```{r Meat-type, echo = FALSE, include = FALSE, fig.height=5, fig.width=9, fig.cap = "Meat type changes over time"}
Meat_type <- meat_consumption %>% filter(Country == "World") %>%
  pivot_longer(col = Mutton_Goat:Beef_Bufallo,
               names_to = "Type",
               values_to = "Per_capita_meat_consumption_by_type")

ggplot(Meat_type, 
      aes(x = Year, 
          y = Per_capita_meat_consumption_by_type,
          fill = Type)) + 
 scale_x_continuous(
    breaks = seq(min(Meat_type$Year),
                 max(Meat_type$Year), by=4))+
 geom_col() 

```

```{r show-label, echo = FALSE, fig.height = 5, fig.width = 9}

ggplotly()

```

- Pork has the highest per capita consumption of meat commodities.
- In 2013, pork: 16 kg; poultry: 15 kg; beef & buffalo: 9 kg; lamb & goat: 2 kg; and only a small percentage of other meats.


???
As a global average, pork has the highest per capita consumption of meat commodities; in 2013, per capita pork consumption was about 16 kg; followed by 15 kg of poultry; 9 kg of beef/buffalo meat; 2 kg of lamb and goat; and only a small percentage of other meats.

---
class: left, top
# Conclusion

- In 2018, production was around 340 million tonnes. And Asia and China have contributed greatly to global meat production.
- The amount of meat produced for a given animal varies significantly across the world based on production systems.
- Richer countries tend to consume more meat per person. Developed countries account for a large share of the six countries with the highest average meat consumption in the last 20 years. 
- The average person in the world consumed around 43 kilograms of meat in 2014. This ranges from over 100kg in the US and Australia to only 5kg in India.
- Although there is a lot of fluctuation, the amount of meat consumed per capita is much larger than the world average.
- At the world level, per capita consumption of pork is the highest among meat commodities over years. 




---
class: centre, middle
# Question & Answer



---

```{r endslide, child="EndSlide/endslide.Rmd"}
```  

