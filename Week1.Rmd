---
title: "Xaringan Template"
subtitle: "An example"
author: "Patricia Menéndez"
institute: "Department of Econometrics and Business Statistics"
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: css/style.css
    yolo: FALSE
---


```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

```{r , echo = FALSE, message = FALSE, warning = FALSE}
library(tidyverse)
library(palmerpenguins)
library(datasets)
library(plotly)
library(kableExtra)
```


class: center, middle
![](https://media.giphy.com/media/OkJat1YNdoD3W/giphy.gif)


---
class: center, middle
# Hello!

Dr Patricia Menéndez
```{r out.width = '35%', echo = FALSE, fig.align="center"}
knitr::include_graphics("figs/patricia.jpeg")
```

Lecturer Department of Econometric and Business Statistics.





---
# Of course Yourselves too!

![](figs/baim-hanif-pYWuOMhtc6k-unsplash.jpg)

.tiny[<span>Photo by <a href="https://unsplash.com/@baim?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Baim Hanif</a> on <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></span>]



---
class: left, top
# This is an example of using boxes around txt
.content-box-soft[ 
- Understand the aims and structure of the unit
]

.content-box-duke-green[ 
* Explain the need for reproducible and collaborative practices
]
.content-box-soft[ 
* Introduce the main tools that we are going to use during the lectures/tutorials
]



---
class: left, top

# Adding color to the text

- .green[ This is an example in green]
- .red[ This is an example in green]

- .bold[This is an example in bold]

- you can also use markdown bold syntax **bold**



---
class: center, top

# Unit Structure



.pull-left[
* Start with individual projects 
.tiny[<span>Photo by <a href="https://unsplash.com/@firmbee?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">William Iven</a> on <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></span>]
]
.pull-left[
```{r out.width = '50%', echo = FALSE}
knitr::include_graphics("figs/william-iven-gcsNOsPEXfs-unsplash.jpg")
```

]

.pull-left[
 * Will continue with group projects
 
 .tiny[<span>Photo by <a href="https://unsplash.com/@homajob?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Scott Graham</a> on <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></span>]

]
.pull-left[
```{r out.width = '50%', echo = FALSE}
knitr::include_graphics("figs/helloquence-5fNmWej4tAA-unsplash.jpg")
```


]

.pull-left[
 * Finally, as a class, we will produce a join project
 
 .tiny[<span>Photo by <a href="https://unsplash.com/@baim?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Baim Hanif</a> on <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></span>]
]
.pull-left[
```{r out.width = '50%', echo = FALSE}
knitr::include_graphics("figs/baim-hanif-pYWuOMhtc6k-unsplash.jpg")
```

]







---
class: left, middle
# Different headings
.green[.bold[Example]] 
### Smaller heading
* My section

### Another samller heading
.content-box-duke-green[ 

  - You will get instructions with the tasks that need to be completed during the tutorial.
  - Fan and Naveen will be there to guide and help you through the activities.
  - Tutorials also provide a good opportunity for you to discuss and work with your peers.
]


---

class: left, middle
# Using also LaTex

.content-box-soft[ 
- .green[.bold[Patricia]] $\leftarrow$ hello hello ]

- $\sum_{i = 1}^{\infty} x_i$

**Bolding using markdown**

---
class: centre, middle
# Questions?



---
class:  center, top

# Let's get started with gifs


![](https://media.giphy.com/media/3ohc1fpw7snh6omAaQ/giphy.gif)





---

### Global meat production -- Di Cui

How does global meat production develop from 1961 to 2018?

```{r Q1, echo = FALSE, message = FALSE, warning = FALSE, fig.cap="Global meat production from 1961 to 2018", fig.width=10, fig.height=5.5, fig.align='center'}

global_production <-read.csv(here::here("Data/global-meat-production.csv"))
production <- read.csv(here::here("Data/meat-production-tonnes.csv"))

global_production <- global_production %>%
  rename("meat_production" = "Livestock.Primary...Meat..Total...1765...Production...5510...tonnes") %>%
  mutate(meat_production = round(meat_production/1000000, digits = 2)) %>%
  filter(Entity %in% c("Oceania", "Africa", "Central America", "South America", "Northern America", "Europe", "Asia")) 

df <- global_production %>%
  group_by(Entity) %>%
  mutate(meat_sum = sum(meat_production)) %>%
  ungroup() %>%
  arrange(meat_sum) 

df <- df %>%
  mutate(Entity = factor(Entity, unique(Entity))) %>%
  group_by(Year) %>%
  mutate(total = sum(meat_production))

ggplot(df, aes(x = Year, y = meat_production, color = Entity))+
  geom_line()+
  scale_fill_brewer(palette = "Set3")+
  scale_x_continuous(breaks = c(1961,1970,1980, 1990, 2000, 2010,2018))+
  scale_y_continuous(breaks = c(0, 10, 50, 100, 150))+
  ylab("livestock meat production (million tonnes)")+
  theme_bw()

```

---


```{r table, echo = FALSE, message = FALSE, warning = FALSE}
increase <- df %>%
  filter(Year == 2018 | Year == 1961) %>%
  select(Entity, Year, meat_production) %>%
  pivot_wider(names_from = Year, values_from = meat_production) %>%
  rename("Year2018" = "2018", "Year1961" = "1961" ) %>%
  mutate(per_wolrd_2018 = round(Year2018*100/sum(Year2018), digits = 2)) %>%
  mutate(increase_times = round((Year2018-Year1961)/Year1961, digits = 2)) 
   
 
increase %>%
  arrange(-per_wolrd_2018)%>%
  knitr::kable(caption = "The comparison between 1961 and 2018") %>%
  kable_styling()

```

---

How do the Top six countries of meat production develop from 1961 to 2018?

```{r country, echo = FALSE, message = FALSE, warning = FALSE, fig.cap="Top six countries' meat production from 1961 to 2018", fig.width=10, fig.height=6.5, fig.align='center'}
production <- production %>%
   rename("meat_production" = "Livestock.Primary...Meat..Total...1765...Production...5510...tonnes") %>%
  mutate(meat_production = round(meat_production/1000000, digits = 2)) 

df2 <- production %>%
  group_by(Entity) %>%
  mutate(meat_sum = sum(meat_production)) %>%
  ungroup() %>%
  arrange(-meat_sum) 

df2 <- df2 %>%
  filter(Code != "" &
        Code %in% c("CHN", "USA", "BRA", "DEU", "FRA", "ARG"))

ggplot(df2, aes(x = Year, y = meat_production, color = Entity))+
  geom_line()+
  scale_fill_brewer(palette = "Set3")+
  scale_x_continuous(breaks = c(1961,1970,1980, 1990, 2000, 2010,2018))+
  ylab("Top 6 countries of livestock meat production (million tonnes)")+
  theme_bw()

ggplotly()

```



---


```{r country-table, echo = FALSE, message = FALSE, warning = FALSE}
increase2 <- production %>%
  group_by(Entity) %>%
  filter(Code != "" &
        Code %in% c("CHN", "USA", "BRA", "DEU", "FRA", "ARG" ,"OWID_WRL"))%>%
  filter(Year == 2018 | Year == 1961) %>%
  select(Entity, Year, meat_production) %>%
  pivot_wider(names_from = Year, values_from = meat_production) %>%
  rename("Year2018" = "2018", "Year1961" = "1961" ) %>%
  mutate(per_wolrd_2018 = round(Year2018*100/342.42, digits = 2)) %>%
  mutate(increase_times = round((Year2018-Year1961)/Year1961, digits = 2)) 
  

increase2 %>%
  arrange(-per_wolrd_2018)%>%
  knitr::kable(caption = "The comparison between 1961 and 2018") %>%
  kable_styling()



```



---
class:  left, top
# Adding figure

.pull-left1[
```{r  penguins , eval = FALSE, warning = FALSE, message = FALSE}
ggplot(data = penguins, 
       aes(x = flipper_length_mm,
           y = body_mass_g)) +
  geom_point(aes(color = species,
                 shape = species),
             size = 2) +
  scale_color_manual(
    values = c("darkorange",
               "darkorchid",
               "cyan4"))

```
]


.pull-right1[
```{r  penguins2 , eval = TRUE, echo = FALSE, warning = FALSE, message = FALSE}
ggplot(data = penguins,
       aes(x = flipper_length_mm,
           y = body_mass_g)) +
  geom_point(aes(color = species,
                 shape = species),
             size = 2) +
  scale_color_manual(
    values = c("darkorange",
               "darkorchid",
               "cyan4"))

```
]



---
class:  left, top
# Adding figure --> another way

.right-column[
```{r  penguins3 , eval = FALSE, warning = FALSE, message = FALSE}
ggplot(data = penguins, 
       aes(x = flipper_length_mm,
           y = body_mass_g)) +
  geom_point(aes(color = species,
                 shape = species),
             size = 2) +
  scale_color_manual(
    values = c("darkorange",
               "darkorchid",
               "cyan4"))

```
]


.left-column[
```{r  penguins4 , eval = TRUE, echo = FALSE, warning = FALSE, message = FALSE}
ggplot(data = penguins,
       aes(x = flipper_length_mm,
           y = body_mass_g)) +
  geom_point(aes(color = species,
                 shape = species),
             size = 2) +
  scale_color_manual(
    values = c("darkorange",
               "darkorchid",
               "cyan4"))

```
]


---
# Tables


```{r}
iris2 <- head(iris)
knitr::kable(iris2,
             col.names = gsub("[.]", " ",
                              names(iris)))

```

---

```{r endslide, child="EndSlide/endslide.Rmd"}
```  

